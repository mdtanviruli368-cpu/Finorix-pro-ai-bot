<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUOTEX AI PRO BOT</title>
    <script src='//libtl.com/sdk.js' data-zone='10473871' data-sdk='show_10473871'></script>
    <link href="https://fonts.googleapis.com/css2?family=Metal+Mania&family=Orbitron:wght@400;700&family=Roboto:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0b0e14;
            --card-bg: #151921;
            --accent-blue: #00d2ff;
            --sell-red: #ff3131;
            --buy-green: #00ff66;
            --border-color: #2a2e35;
        }

        body {
            background-color: var(--bg-color);
            color: #ffffff;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        /* Start Screen Styling */
        #startScreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            text-align: center;
        }

        .start-btn {
            background: linear-gradient(135deg, #0072ff, #00d2ff);
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 50px;
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 30px rgba(0,210,255,0.4);
            transition: 0.3s;
        }

        .start-btn:hover { transform: scale(1.05); }

        /* Main App Container */
        .app-container {
            display: none; /* Initially Hidden */
            width: 100%;
            max-width: 420px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            text-align: center;
            margin: 20px;
        }

        h1 { font-family: 'Metal Mania', cursive; font-size: 32px; color: var(--accent-blue); margin-bottom: 5px; }
        .subtitle { font-size: 10px; color: #666; margin-bottom: 25px; letter-spacing: 2px; font-family: 'Orbitron', sans-serif; }

        .market-select {
            width: 100%; padding: 14px; background: #1c222d; border: 1px solid var(--border-color);
            color: white; border-radius: 12px; margin-bottom: 20px; font-family: 'Orbitron', sans-serif; outline: none; cursor: pointer;
        }

        .upload-box {
            border: 2px dashed #3a3f4b; padding: 30px 20px; border-radius: 20px;
            cursor: pointer; margin-bottom: 20px; background: rgba(255,255,255,0.02);
        }

        #preview { width: 100%; border-radius: 12px; display: none; margin-top: 10px; border: 1px solid #333; }

        #analyzeBtn {
            background: linear-gradient(135deg, #0072ff, #00d2ff);
            color: white; border: none; padding: 18px; border-radius: 15px; width: 100%;
            font-family: 'Orbitron', sans-serif; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,114,255,0.4); text-transform: uppercase;
        }

        /* Result Display */
        .signal-container {
            display: none; margin-top: 25px; background: #0d1117; padding: 25px;
            border-radius: 25px; border: 1px solid var(--border-color);
        }

        .direction { font-family: 'Metal Mania', cursive; font-size: 60px; margin-bottom: 10px; }
        .UP { color: var(--buy-green); text-shadow: 0 0 25px rgba(0,255,102,0.5); }
        .DOWN { color: var(--sell-red); text-shadow: 0 0 25px rgba(255,49,49,0.5); }

        .info-box { background: rgba(0, 210, 255, 0.03); padding: 18px; border-radius: 15px; border: 1px solid #1c222d; margin: 15px 0; }
        .info-row { font-family: 'Orbitron', sans-serif; font-size: 17px; margin: 8px 0; color: #00d2ff; }
        .mtg-text { color: #ffcc00; font-weight: bold; font-size: 22px; margin: 15px 0; text-transform: uppercase; font-family: 'Orbitron'; }
        .logic-text { text-align: left; font-size: 14px; color: #a0a6b1; border-top: 1px solid #222; padding-top: 15px; line-height: 1.7; }
    </style>
</head>
<body>

<div id="startScreen">
    <h1 style="margin-bottom: 30px;">QUOTEX AI PRO</h1>
    <button class="start-btn" onclick="handleStart()">START ANALYSIS</button>
    <p style="margin-top: 20px; font-size: 12px; color: #444;">Click start to load market data</p>
</div>

<div class="app-container" id="mainApp">
    <h1>QUOTEX ANALYZE BOT</h1>
    <div class="subtitle">PREMIUM AI ANALYSIS</div>

    <label style="display: block; text-align: left; font-size: 12px; margin-bottom: 8px; color: #888; font-family: 'Orbitron';">SELECT MARKET</label>
    <select id="marketSelect" class="market-select">
        <optgroup label="Real Markets">
            <option value="EUR/USD">EUR/USD</option>
            <option value="GBP/USD">GBP/USD</option>
            <option value="USD/JPY">USD/JPY</option>
            <option value="AUD/USD">AUD/USD</option>
            <option value="USD/CAD">USD/CAD</option>
            <option value="USD/CHF">USD/CHF</option>
            <option value="NZD/USD">NZD/USD</option>
            <option value="EUR/GBP">EUR/GBP</option>
            <option value="EUR/JPY">EUR/JPY</option>
            <option value="GBP/JPY">GBP/JPY</option>
            <option value="CAD/JPY">CAD/JPY</option>
        </optgroup>
        <optgroup label="OTC Markets">
            <option value="EUR/USD OTC">EUR/USD OTC</option>
            <option value="GBP/USD OTC">GBP/USD OTC</option>
            <option value="USD/JPY OTC">USD/JPY OTC</option>
            <option value="AUD/USD OTC">AUD/USD OTC</option>
            <option value="USD/CAD OTC">USD/CAD OTC</option>
            <option value="USD/CHF OTC">USD/CHF OTC</option>
            <option value="NZD/USD OTC">NZD/USD OTC</option>
            <option value="EUR/GBP OTC">EUR/GBP OTC</option>
            <option value="EUR/JPY OTC">EUR/JPY OTC</option>
            <option value="GBP/JPY OTC">GBP/JPY OTC</option>
            <option value="USD/BRL OTC">USD/BRL OTC</option>
            <option value="USD/INR OTC">USD/INR OTC</option>
            <option value="USD/MXN OTC">USD/MXN OTC</option>
            <option value="USD/IDR OTC">USD/IDR OTC</option>
            <option value="USD/TRY OTC">USD/TRY OTC</option>
            <option value="USD/ZAR OTC">USD/ZAR OTC</option>
            <option value="USD/PHP OTC">USD/PHP OTC</option>
            <option value="USD/ARS OTC">USD/ARS OTC</option>
            <option value="USD/BDT OTC">USD/BDT OTC</option>
            <option value="USD/EGP OTC">USD/EGP OTC</option>
        </optgroup>
    </select>

    <div class="upload-box" onclick="document.getElementById('imageInput').click()">
        <span id="labelTxt" style="font-size: 14px; color: #58a6ff; font-weight: bold;">[ + ] UPLOAD CHART IMAGE</span>
        <input type="file" id="imageInput" accept="image/*" style="display: none;">
        <img id="preview" src="">
    </div>

    <button id="analyzeBtn">ANALYZE CHART</button>

    <div id="signalArea" class="signal-container">
        <div id="dirText" class="direction">---</div>
        <div class="info-box">
            <div id="timeText" class="info-row">TIME: --:--:--</div>
            <div id="priceText" class="info-row">ENTRY: 0.00000</div>
        </div>
        <div class="mtg-text">MAX ON MTG</div>
        <div id="logicText" class="logic-text"></div>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyA4_u4Cc0ydiAqwvxXDvHO3VUpwHqoLxbU";

    // Ad Logic
    function handleStart() {
        // Show Ad
        show_10473871().then(() => {
            // After Ad Finishes
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
        }).catch((err) => {
            // Fallback if Ad fails to load
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
        });
    }

    // Analyzer Logic
    const imageInput = document.getElementById('imageInput');
    const preview = document.getElementById('preview');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const signalArea = document.getElementById('signalArea');

    imageInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = e => { 
                preview.src = e.target.result; 
                preview.style.display = 'block'; 
                document.getElementById('labelTxt').style.display='none';
            };
            reader.readAsDataURL(file);
        }
    });

    analyzeBtn.addEventListener('click', async () => {
        const file = imageInput.files[0];
        const market = document.getElementById('marketSelect').value;
        if (!file) return alert("Please upload a chart screenshot!");

        analyzeBtn.innerText = "AI ANALYZING...";
        analyzeBtn.disabled = true;
        signalArea.style.display = "none";

        const base64Data = await toBase64(file);
        const pureBase64 = base64Data.split(',')[1];
        const isOTC = market.includes("OTC");

        let customPrompt = isOTC ? 
            `Expert OTC Analyst prompt for ${market}. Identify time, price, and direction.` : 
            `Expert Price Action prompt for ${market}. Identify time, price, and direction.`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{
                        parts: [
                            { text: customPrompt },
                            { inline_data: { mime_type: "image/jpeg", data: pureBase64 } }
                        ]
                    }]
                })
            });

            const data = await response.json();
            const res = data.candidates[0].content.parts[0].text.split('\n');

            const direction = res[0].toUpperCase().includes("UP") ? "UP" : "DOWN";
            document.getElementById('dirText').innerText = direction;
            document.getElementById('dirText').className = `direction ${direction}`;
            document.getElementById('timeText').innerText = res[1] || "TIME: N/A";
            document.getElementById('priceText').innerText = res[2] || "ENTRY: N/A";
            document.getElementById('logicText').innerText = res.slice(3).join(' ');

            signalArea.style.display = "block";
        } catch (e) {
            alert("Analysis failed. Try again.");
        } finally {
            analyzeBtn.innerText = "ANALYZE CHART";
            analyzeBtn.disabled = false;
        }
    });

    const toBase64 = file => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });
</script>

</body>
</html>
